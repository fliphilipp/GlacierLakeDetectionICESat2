universe    = vanilla

+SingularityImage = "stash:///osgconnect/public/fliphilipp/containers/simple-test7.sif"

executable  = run_py.sh

arguments = $(granule) $(polygon)

max_retries = 5

transfer_input_files = detect_lakes.py, , misc/test1, misc/test2, $(polygon)

transfer_output_files = output
transfer_output_remaps  = "detection_out_plot=detection_plots"

should_transfer_files = YES
when_to_transfer_output = ON_EXIT

log           = logs/job.$(granule).$(ClusterID).$(ProcID).log
error         = errs/job.$(granule).$(ClusterID).$(ProcID).err
output        = outs/job.$(granule).$(ClusterID).$(ProcID).out

request_cpus    = 1
request_memory  = 2GB
request_disk    = 4GB

queue granule,polygon from granule_lists/jakobshavn_small_2021-short.csv
